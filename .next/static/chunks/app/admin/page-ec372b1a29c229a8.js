(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1524:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},1647:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(5155);t(2115);var r=t(3101),n=t(4269);let d=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(d({variant:t}),s),...r})}},2056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2909:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(5155),r=t(2115),n=t(6199),d=t(7260),i=t(6948),l=t(3998),c=t(3406),o=t(1647),m=t(4269),x=t(1873),u=t(1169),h=t(1847);let f=(0,h.A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var p=t(2056),j=t(1524),g=t(6983),v=t(7586),N=t(6485);function y(e){let{jobs:s,onJobSelect:t,className:r}=e,n=e=>e?new Date(e).toLocaleDateString():"Not set";return 0===s.length?(0,a.jsx)("div",{className:"flex items-center justify-center p-ds-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-ds-2",children:[(0,a.jsx)("div",{className:"text-muted-foreground font-body",children:"No active jobs found"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-body",children:"Create a new job to get started with crew management."})]})}):(0,a.jsx)("div",{className:(0,m.cn)("grid gap-ds-4 md:grid-cols-2 lg:grid-cols-3",r),children:s.map(e=>(0,a.jsxs)(i.Zp,{className:"bg-card hover:shadow-md transition-shadow cursor-pointer",onClick:()=>null==t?void 0:t(e.id),children:[(0,a.jsxs)(i.aR,{className:"p-ds-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-ds-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(i.ZB,{className:"font-heading text-lg truncate text-foreground",children:e.title}),(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground mt-1 truncate",children:e.client})]}),(0,a.jsxs)("div",{className:"flex gap-ds-1 flex-wrap",children:[(0,a.jsx)(o.E,{variant:(e=>{switch(e){case"ACTIVE":return"default";case"COMPLETE":return"secondary";case"ON_HOLD":return"destructive";default:return"outline"}})(e.status),className:"text-xs",children:e.status}),(0,a.jsx)(o.E,{variant:(e=>{switch(e.toLowerCase()){case"urgent":return"destructive";case"high":case"low":return"secondary";default:return"outline"}})(e.priority),className:"text-xs",children:e.priority})]})]}),e.location&&(0,a.jsxs)("div",{className:"flex items-center gap-ds-1 text-sm text-muted-foreground font-body",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"truncate",children:e.location})]})]}),(0,a.jsxs)(i.Wu,{className:"p-ds-3 pt-0 space-y-ds-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-ds-3",children:[(0,a.jsxs)("div",{className:"space-y-ds-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-body text-sm font-medium text-foreground",children:"Field"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"font-body text-xs text-muted-foreground",children:[e.fieldCrews.length," crews • ",e.totalFieldWorkers," workers"]}),(0,a.jsx)("div",{className:"w-full bg-muted h-2 rounded-sm",children:(0,a.jsx)("div",{className:"bg-primary h-2 rounded-sm transition-all",style:{width:"".concat(e.progressIndicators.fieldProgress,"%")}})}),(0,a.jsxs)("div",{className:"font-body text-xs text-muted-foreground",children:[e.progressIndicators.fieldProgress,"% complete"]})]})]}),(0,a.jsxs)("div",{className:"space-y-ds-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-secondary"}),(0,a.jsx)("span",{className:"font-body text-sm font-medium text-foreground",children:"Shop"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"font-body text-xs text-muted-foreground",children:[e.shopCrews.length," crews • ",e.totalShopWorkers," workers"]}),(0,a.jsx)("div",{className:"w-full bg-muted h-2 rounded-sm",children:(0,a.jsx)("div",{className:"bg-secondary h-2 rounded-sm transition-all",style:{width:"".concat(e.progressIndicators.shopProgress,"%")}})}),(0,a.jsxs)("div",{className:"font-body text-xs text-muted-foreground",children:[e.progressIndicators.shopProgress,"% complete"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-ds-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[e.progressIndicators.onSchedule?(0,a.jsx)(f,{className:"h-4 w-4 text-success"}):(0,a.jsx)(p.A,{className:"h-4 w-4 text-warning"}),(0,a.jsx)("span",{className:"font-body text-xs text-muted-foreground",children:e.progressIndicators.onSchedule?"On Schedule":"Behind Schedule"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(j.A,{className:(0,m.cn)("h-4 w-4","on-track"===e.progressIndicators.budgetStatus?"text-success":"text-warning")}),(0,a.jsx)("span",{className:"font-body text-xs text-muted-foreground",children:"on-track"===e.progressIndicators.budgetStatus?"On Budget":"Over Budget"})]})]}),(e.startDate||e.endDate)&&(0,a.jsxs)("div",{className:"flex items-center gap-ds-2 text-xs text-muted-foreground font-body",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[n(e.startDate)," - ",n(e.endDate)]})]}),e.recentActivity.length>0&&(0,a.jsxs)("div",{className:"space-y-ds-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-body text-xs font-medium text-foreground",children:"Recent Activity"})]}),(0,a.jsx)("div",{className:"space-y-1",children:e.recentActivity.slice(0,2).map(e=>(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-body",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.sender,":"]})," ",e.content]},e.id))})]}),e.upcomingEvents.length>0&&(0,a.jsxs)("div",{className:"space-y-ds-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-body text-xs font-medium text-foreground",children:"Upcoming"})]}),(0,a.jsx)("div",{className:"space-y-1",children:e.upcomingEvents.slice(0,2).map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-xs font-body",children:[(0,a.jsx)("span",{className:"text-foreground truncate",children:e.title}),(0,a.jsx)("span",{className:"text-muted-foreground",children:new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex gap-ds-2 pt-ds-2",children:[(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"flex-1 font-body",onClick:s=>{s.stopPropagation(),null==t||t(e.id)},children:"View Details"}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"font-body",onClick:e=>e.stopPropagation(),children:"Message"})]})]})]},e.id))})}let b=(0,h.A)("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]),w=(0,h.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),k=(0,h.A)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),A=(0,h.A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),C=(0,h.A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),M=(0,h.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);function S(e){let{crews:s,onCrewSelect:t,onMessageCrew:n,onCallCrew:d,className:c,realTimeUpdates:h=!1}=e,[f,p]=(0,r.useState)({}),[j,v]=(0,r.useState)(new Date);return((0,r.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{let e={};s.forEach(s=>{let t=["active","offline","break"];e[s.id]=t[Math.floor(Math.random()*t.length)]}),p(e),v(new Date)},3e4);return()=>clearInterval(e)},[s,h]),0===s.length)?(0,a.jsx)("div",{className:"flex items-center justify-center p-ds-6 text-center",children:(0,a.jsxs)("div",{className:"space-y-ds-2",children:[(0,a.jsx)("div",{className:"text-muted-foreground font-body",children:"No crews assigned"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-body",children:"Assign crews to jobs to monitor their status and location."})]})}):(0,a.jsxs)("div",{className:(0,m.cn)("space-y-ds-4",c),children:[h&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-ds-3 bg-muted rounded",children:[(0,a.jsx)("div",{className:"flex items-center gap-ds-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[(0,a.jsx)(b,{className:"h-4 w-4 text-success animate-pulse"}),(0,a.jsx)("span",{className:"font-body text-sm text-foreground",children:"Live Updates"})]})}),(0,a.jsxs)("div",{className:"font-body text-xs text-muted-foreground",children:["Last updated: ",j.toLocaleTimeString()]})]}),(0,a.jsx)("div",{className:"grid gap-ds-3 md:grid-cols-2 lg:grid-cols-3",children:s.map(e=>{let s=f[e.id]||e.status,r=e.members.filter(e=>e.isOnline).length;return(0,a.jsxs)(i.Zp,{className:"bg-card hover:shadow-md transition-shadow cursor-pointer",onClick:()=>null==t?void 0:t(e.id),children:[(0,a.jsxs)(i.aR,{className:"p-ds-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-ds-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)(i.ZB,{className:"font-heading text-base text-foreground flex items-center gap-ds-2",children:[(0,a.jsx)("span",{className:"truncate",children:e.name}),(0,a.jsx)("div",{className:(0,m.cn)("w-2 h-2 rounded-full","FIELD"===e.type?"bg-primary":"bg-secondary")})]}),(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground mt-1 truncate",children:e.jobName})]}),(0,a.jsxs)(o.E,{variant:(e=>{switch(e){case"active":return"default";case"offline":return"secondary";default:return"outline"}})(s),className:"text-xs",children:[(0,a.jsx)(b,{className:(0,m.cn)("h-3 w-3 mr-1",(e=>{switch(e){case"active":return"text-success";case"offline":default:return"text-muted-foreground";case"break":return"text-warning"}})(s))}),s]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.E,{variant:"outline",className:"text-xs",children:e.type}),(0,a.jsxs)("div",{className:"flex items-center gap-ds-1 text-xs text-muted-foreground font-body",children:[(0,a.jsx)(u.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[r,"/",e.memberCount]})]})]})]}),(0,a.jsxs)(i.Wu,{className:"p-ds-3 pt-0 space-y-ds-3",children:[e.foreman&&(0,a.jsxs)("div",{className:"space-y-ds-1",children:[(0,a.jsx)("div",{className:"font-body text-xs font-medium text-foreground",children:"Foreman"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-body text-sm text-foreground",children:e.foreman.name}),e.foreman.location&&(0,a.jsxs)("div",{className:"flex items-center gap-ds-1 text-xs text-muted-foreground font-body",children:[(0,a.jsx)(x.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"truncate max-w-20",children:e.foreman.location})]})]})]}),e.currentLocation&&(0,a.jsxs)("div",{className:"flex items-center gap-ds-1 text-sm text-muted-foreground font-body",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"truncate",children:e.currentLocation})]}),(0,a.jsxs)("div",{className:"space-y-ds-2",children:[(0,a.jsxs)("div",{className:"font-body text-xs font-medium text-foreground",children:["Crew Members (",e.memberCount,")"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[e.members.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-ds-1",children:[e.isOnline?(0,a.jsx)(w,{className:"h-3 w-3 text-success"}):(0,a.jsx)(k,{className:"h-3 w-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-body text-foreground truncate max-w-24",children:e.name})]}),e.location&&(0,a.jsx)("span",{className:"font-body text-muted-foreground truncate max-w-16",children:e.location})]},e.id)),e.members.length>3&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-body text-center",children:["+",e.members.length-3," more members"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-ds-1 text-xs text-muted-foreground font-body",children:[(0,a.jsx)(g.A,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:(e=>{if(!e)return"No recent activity";let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/6e4);return t<1?"Just now":t<60?"".concat(t,"m ago"):t<1440?"".concat(Math.floor(t/60),"h ago"):s.toLocaleDateString()})(e.lastActivity)})]}),(0,a.jsxs)("div",{className:"flex gap-ds-2 pt-ds-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",className:"flex-1 font-body",onClick:s=>{s.stopPropagation(),null==t||t(e.id)},children:[(0,a.jsx)(A,{className:"h-3 w-3 mr-1"}),"View"]}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"font-body",onClick:s=>{s.stopPropagation(),null==n||n(e.id)},children:(0,a.jsx)(C,{className:"h-3 w-3"})}),(0,a.jsx)(l.$,{variant:"outline",size:"sm",className:"font-body",onClick:s=>{s.stopPropagation(),null==d||d(e.id)},children:(0,a.jsx)(M,{className:"h-3 w-3"})})]})]})]},e.id)})})]})}let E=(0,h.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),z=(0,h.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),D=(0,h.A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),L=(0,h.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var R=t(6191);let O=(0,h.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function Z(){let{data:e,status:s}=(0,n.wV)(),[t,o]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),[f,g]=(0,r.useState)(null),[b,w]=(0,r.useState)("overview"),[k,A]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if("loading"!==s&&"unauthenticated"===s)return void(0,d.redirect)("/api/auth/signin")},[s]);let C=async()=>{try{h(!0),g(null);let e=await fetch("/api/admin/jobs"),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to fetch dashboard data");o(s.data)}catch(e){console.error("Dashboard fetch error:",e),g(e instanceof Error?e.message:"Unknown error occurred")}finally{h(!1)}};if((0,r.useEffect)(()=>{C()},[]),(0,r.useEffect)(()=>{if(!k)return;let e=setInterval(()=>{C()},6e4);return()=>clearInterval(e)},[k]),"loading"===s||x)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"flex items-center gap-ds-2",children:[(0,a.jsx)(E,{className:"h-6 w-6 animate-spin text-primary"}),(0,a.jsx)("span",{className:"font-body text-foreground",children:"Loading dashboard..."})]})});if(f)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-md",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"font-heading text-destructive flex items-center gap-ds-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5"}),"Access Error"]})}),(0,a.jsxs)(i.Wu,{className:"space-y-ds-3",children:[(0,a.jsx)("p",{className:"font-body text-muted-foreground",children:f}),(0,a.jsxs)("div",{className:"flex gap-ds-2",children:[(0,a.jsxs)(l.$,{onClick:C,className:"flex-1",children:[(0,a.jsx)(E,{className:"h-4 w-4 mr-ds-1"}),"Retry"]}),(0,a.jsx)(l.$,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]})]})]})});let M=t?(e=>{let s=[];return e.forEach(e=>{var t,a;null==(t=e.fieldCrews)||t.forEach(t=>{var a;s.push({id:t.id,name:t.name,type:"FIELD",foreman:t.foreman,memberCount:t.memberCount,members:(null==(a=t.members)?void 0:a.map(e=>({...e,isOnline:Math.random()>.3})))||[],jobId:e.id,jobName:e.title,status:Math.random()>.8?"break":"active",lastActivity:new Date(Date.now()-36e5*Math.random()).toISOString()})}),null==(a=e.shopCrews)||a.forEach(t=>{var a;s.push({id:t.id,name:t.name,type:"SHOP",foreman:t.foreman,memberCount:t.memberCount,members:(null==(a=t.members)?void 0:a.map(e=>({...e,isOnline:Math.random()>.2})))||[],jobId:e.id,jobName:e.title,status:Math.random()>.9?"break":"active",lastActivity:new Date(Date.now()-18e5*Math.random()).toISOString()})})}),s})(t.jobs):[];return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("header",{className:"border-b bg-card",children:(0,a.jsx)("div",{className:"container mx-auto px-ds-4 py-ds-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-heading text-2xl font-semibold text-foreground",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground mt-1",children:"Multi-job overview and crew coordination"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-ds-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>A(!k),className:(0,m.cn)("font-body",k&&"bg-primary text-primary-foreground"),children:[(0,a.jsx)(z,{className:"h-4 w-4 mr-ds-1"}),"Live Updates"]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",onClick:C,disabled:x,children:[(0,a.jsx)(E,{className:(0,m.cn)("h-4 w-4 mr-ds-1",x&&"animate-spin")}),"Refresh"]})]})]})})}),t&&(0,a.jsxs)("div",{className:"container mx-auto px-ds-4 py-ds-4",children:[(0,a.jsxs)("div",{className:"grid gap-ds-4 md:grid-cols-2 lg:grid-cols-5 mb-ds-6",children:[(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-ds-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground",children:"Active Jobs"}),(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-foreground",children:t.summary.totalActiveJobs})]}),(0,a.jsx)(D,{className:"h-8 w-8 text-primary"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-ds-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground",children:"Field Workers"}),(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-foreground",children:t.summary.totalFieldWorkers})]}),(0,a.jsx)(u.A,{className:"h-8 w-8 text-primary"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-ds-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground",children:"Shop Workers"}),(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-foreground",children:t.summary.totalShopWorkers})]}),(0,a.jsx)(u.A,{className:"h-8 w-8 text-secondary"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-ds-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground",children:"On Schedule"}),(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-success",children:t.summary.jobsOnSchedule})]}),(0,a.jsx)(j.A,{className:"h-8 w-8 text-success"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-ds-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-body text-sm text-muted-foreground",children:"Behind Schedule"}),(0,a.jsx)("p",{className:"font-heading text-2xl font-semibold text-warning",children:t.summary.jobsBehindSchedule})]}),(0,a.jsx)(p.A,{className:"h-8 w-8 text-warning"})]})})})]}),(0,a.jsxs)(c.tU,{value:b,onValueChange:w,className:"space-y-ds-4",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(c.Xi,{value:"overview",className:"font-body",children:"Job Overview"}),(0,a.jsx)(c.Xi,{value:"crews",className:"font-body",children:"Crew Status"}),(0,a.jsx)(c.Xi,{value:"activity",className:"font-body",children:"Recent Activity"})]}),(0,a.jsxs)(c.av,{value:"overview",className:"space-y-ds-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-heading text-xl font-semibold text-foreground",children:"Active Jobs Overview"}),(0,a.jsxs)("div",{className:"flex gap-ds-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(L,{className:"h-4 w-4 mr-ds-1"}),"Filter"]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-ds-1"}),"New Job"]})]})]}),(0,a.jsx)(y,{jobs:t.jobs,onJobSelect:e=>{console.log("Selected job:",e)}})]}),(0,a.jsxs)(c.av,{value:"crews",className:"space-y-ds-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-heading text-xl font-semibold text-foreground",children:"Crew Status & Locations"}),(0,a.jsxs)("div",{className:"flex gap-ds-2",children:[(0,a.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(O,{className:"h-4 w-4 mr-ds-1"}),"Search"]}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-ds-1"}),"Assign Crew"]})]})]}),(0,a.jsx)(S,{crews:M,onCrewSelect:e=>{console.log("Selected crew:",e)},onMessageCrew:e=>{console.log("Message crew:",e)},onCallCrew:e=>{console.log("Call crew:",e)},realTimeUpdates:k})]}),(0,a.jsxs)(c.av,{value:"activity",className:"space-y-ds-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-heading text-xl font-semibold text-foreground",children:"Recent Activity"}),(0,a.jsxs)(l.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-ds-1"}),"View Calendar"]})]}),(0,a.jsxs)("div",{className:"grid gap-ds-4 md:grid-cols-2",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"font-heading text-base flex items-center gap-ds-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),"Recent Messages"]})}),(0,a.jsx)(i.Wu,{className:"space-y-ds-2",children:t.jobs.slice(0,3).map((e,s)=>{var t;return(0,a.jsx)("div",{className:"space-y-ds-1",children:null==(t=e.recentActivity)?void 0:t.slice(0,2).map((s,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-start text-sm",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-body text-foreground",children:[(0,a.jsxs)("span",{className:"font-medium",children:[s.sender,":"]})," ",s.content]}),(0,a.jsx)("p",{className:"font-body text-xs text-muted-foreground",children:e.title})]}),(0,a.jsx)("span",{className:"font-body text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t))},s)})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"font-heading text-base flex items-center gap-ds-2",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),"Upcoming Events"]})}),(0,a.jsx)(i.Wu,{className:"space-y-ds-2",children:t.jobs.slice(0,3).map((e,s)=>{var t;return(0,a.jsx)("div",{className:"space-y-ds-1",children:null==(t=e.upcomingEvents)?void 0:t.slice(0,2).map((s,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-start text-sm",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-body text-foreground font-medium",children:s.title}),(0,a.jsxs)("p",{className:"font-body text-xs text-muted-foreground",children:[e.title," • ",s.type]})]}),(0,a.jsx)("span",{className:"font-body text-xs text-muted-foreground",children:new Date(s.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},t))},s)})})]})]})]})]})]})]})}},3406:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>l,tU:()=>i});var a=t(5155),r=t(2115),n=t(574),d=t(4269);let i=n.bL,l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.B8,{ref:s,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});l.displayName=n.B8.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.l9,{ref:s,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});c.displayName=n.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.UC,{ref:s,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});o.displayName=n.UC.displayName},3998:(e,s,t)=>{"use strict";t.d(s,{$:()=>c,r:()=>l});var a=t(5155),r=t(2115),n=t(2467),d=t(3101),i=t(4269);let l=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:d,asChild:c=!1,...o}=e,m=c?n.DX:"button";return(0,a.jsx)(m,{className:(0,i.cn)(l({variant:r,size:d,className:t})),ref:s,...o})});c.displayName="Button"},4269:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2821),r=t(5889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},6948:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>l,Zp:()=>d,aR:()=>i});var a=t(5155),r=t(2115),n=t(4269);let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});d.displayName="Card";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});l.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},7586:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},9216:(e,s,t)=>{Promise.resolve().then(t.bind(t,2909))}},e=>{e.O(0,[545,977,199,130,441,255,358],()=>e(e.s=9216)),_N_E=e.O()}]);